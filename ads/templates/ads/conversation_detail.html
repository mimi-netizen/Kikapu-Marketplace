{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-4">
    <div class="mb-4">
        <h2 class="text-xl font-bold">{{ conversation.ad.title }}</h2>
        <p class="text-gray-600">Conversation with {{ other_participant.username }}</p>
    </div>

    <div class="space-y-4 mb-4">
        {% for message in messages %}
            <div class="flex {% if message.sender == request.user %}justify-end{% endif %}">
                <div class="max-w-2xl rounded-lg p-3 {% if message.sender == request.user %}bg-blue-100{% else %}bg-gray-100{% endif %}">
                    <p>{{ message.content }}</p>
                    <small class="text-gray-600">{{ message.created_at|timesince }} ago</small>
                </div>
            </div>
        {% endfor %}
    </div>

    <form method="post" action="{% url 'send_message' conversation.ad.id %}" class="mt-4">
        {% csrf_token %}
        <div class="flex space-x-2">
            <textarea 
                name="message" 
                required 
                class="flex-1 border rounded-lg p-2"
                placeholder="Type your message..."
            ></textarea>
            <button 
                type="submit" 
                class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
            >
                Send
            </button>
        </div>
    </form>
</div>
{% endblock %}